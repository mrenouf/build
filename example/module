avr_cpu = 'mega2560'
avr_clock = 16000000

cc_library(
  name="foo",
  static=True,
  sources=["foo.c"],
  abi='avr',
  cflags="-I/usr/lib/avr/include -D__AVR_AT%s__ -DF_CPU=%d" % (avr_cpu, avr_clock),
  deps=[":bar"]
)

cc_library(
  name="bar",
  static=False,
  sources=["bar.c"],
  abi='avr',
  cflags="-I/usr/lib/avr/include -D__AVR_AT%s__ -DF_CPU=%d" % (avr_cpu, avr_clock),
)

cc_binary(
  name="baz",
  sources=["main.c"],
  abi='avr',
  deps=[":foo", ":bar"]
)

